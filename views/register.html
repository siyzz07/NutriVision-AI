<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI-Based Healthy Lifestyle Assistant | Register</title>

<style>
body {
font-family: Arial, sans-serif;
background: linear-gradient(to right, #4facfe, #43e97b);
margin: 0;
padding: 0;
}

.container {
width: 420px;
background: #fff;
margin: 40px auto;
padding: 25px;
border-radius: 12px;
box-shadow: 0 15px 30px rgba(0,0,0,0.2);
}

.logo {
text-align: center;
font-weight: bold;
font-size: 20px;
color: #1b6ca8;
}

.subtitle {
text-align: center;
color: #555;
font-size: 14px;
margin-bottom: 20px;
}

input, select {
width: 100%;
padding: 10px;
margin: 8px 0;
border-radius: 6px;
border: 1px solid #ccc;
font-size: 14px;
}

.row {
display: flex;
gap: 10px;
}

.row input, .row select {
flex: 1;
}

.toggle {
display: flex;
align-items: center;
gap: 10px;
margin: 10px 0;
}

.add-btn {
background: #eaf4ff;
color: #1b6ca8;
border: none;
padding: 10px;
width: 100%;
border-radius: 6px;
cursor: pointer;
font-weight: bold;
}

.add-btn:hover {
background: #d6ebff;
}

.param-row {
display: flex;
gap: 8px;
margin-top: 8px;
}

.param-row input, .param-row select {
flex: 1;
}

.delete-btn {
background: #ff4d4d;
color: white;
border: none;
padding: 0 10px;
border-radius: 6px;
cursor: pointer;
}

.register-btn {
background: linear-gradient(to right, #43cea2, #185a9d);
color: white;
border: none;
padding: 12px;
width: 100%;
border-radius: 8px;
font-size: 16px;
margin-top: 15px;
cursor: pointer;
}

.register-btn:hover {
opacity: 0.9;
}

.login-link {
text-align: center;
margin-top: 10px;
font-size: 14px;
}
</style>
</head>

<body>

<div class="container">
<div class="logo">AI-Based Healthy Lifestyle Assistant</div>
<div class="subtitle">Create Your Account</div>

<input id="name" type="text" placeholder="Name">
<input id="email" type="email" placeholder="Email (User ID)">
<input id="password" type="password" placeholder="Password">


<div class="row">
<select id="gender">
<option value="">Gender</option>
<option value="Male">Male</option>
<option value="Female">Female</option>
<option value="Other">Other</option>
</select>
<input id="dob" type="date">
</div>

<div class="row">
<input id="weight" type="number" placeholder="Weight (kg)">
<input id="height" type="number" placeholder="Height (cm)">
</div>

<div class="toggle">
<strong>Diabetes</strong>
<label><input type="radio" name="diabetes" value="Yes"> Yes</label>
<label><input type="radio" name="diabetes" value="No" checked> No</label>
</div>

<input id="cholesterol" type="text" placeholder="Cholesterol (mg/dL)">
<input id="bp" type="text" placeholder="Blood Pressure (120/80)">

<button class="add-btn" onclick="addParameter()">+ Add Parameter</button>

<div id="parameters"></div>
<button class="register-btn" onclick="register()">Register</button>

<div class="login-link">
Already have an account? <a href="/login">Login</a>
</div>
</div>

<script>
function addParameter() {
const container = document.getElementById("parameters");

const row = document.createElement("div");
row.className = "param-row";

row.innerHTML = `
<input type="text" placeholder="Parameter (SGPT, SGOT)" class="param-name">
<input type="text" placeholder="Measure" class="param-value">
<select class="param-unit">
<option>Unit</option>
<option>mg/dL</option>
<option>U/L</option>
<option>mmHg</option>
</select>
<button class="delete-btn" onclick="this.parentElement.remove()">ðŸ—‘</button>
`;

container.appendChild(row);
}
</script>
<script>
async function register(){

  const name = document.getElementById("name").value;
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;
  const gender = document.getElementById("gender").value;
  const dob = document.getElementById("dob").value;
  const weight = document.getElementById("weight").value;
  const height = document.getElementById("height").value;
  
  // Get Diabetes value
  const diabetesRadios = document.getElementsByName('diabetes');
  let diabetes = 'No';
  for(let radio of diabetesRadios){
    if(radio.checked) diabetes = radio.value;
  }
  
  const cholesterol = document.getElementById("cholesterol").value;
  const bp = document.getElementById("bp").value;

  if(!name || !email || !password){
    alert("Please fill all required fields");
    return;
  }
  
  const userData = {
    name, email, password, gender, dob, weight, height, diabetes, cholesterol, bp
  };

  try {
      const response = await fetch('/api/auth/register', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(userData)
      });
      
      const data = await response.json();
      
      if(response.ok){
          alert("Registration successful!");
          window.location.href = "/login";
      } else {
          alert("Error: " + data.message || data.error);
      }
  } catch(err) {
      console.error(err);
      alert("Registration failed");
  }
}
</script>

</body>
</html>
